
<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>RAB Marmer & Keramik Otomatis</title>
  <style>
    body { font-family: sans-serif; padding: 20px; max-width: 600px; margin: auto; }
    input, select, button { width: 100%; padding: 10px; margin: 5px 0; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    table, th, td { border: 1px solid #aaa; }
    th, td { padding: 8px; text-align: center; }
    .row { display: flex; gap: 10px; }
    .row input { flex: 1; }
  </style>
</head>
<body>

  <h2>Form RAB Otomatis</h2>

  <label>Pilih Pekerjaan:</label>
  <select id="pekerjaan" onchange="setHarga()">
    <option disabled selected>-- Pilih --</option>
    <option value="keramik_60x60">Keramik 60x60</option>
    <option value="keramik_50x50">Keramik 50x50</option>
    <option value="keramik_40x40">Keramik 40x40</option>
    <option value="keramik_30x30">Keramik ≤30x30</option>
    <option value="marmer_lantai">Marmer Lantai</option>
    <option value="marmer_dinding">Marmer Dinding</option>
    <option value="plint_biasa">Plint Biasa</option>
    <option value="trap_tangga">Trap Tangga</option>
    <option value="lobang_lobang">Lobang-lobang</option>
    <option value="top_table">Top Table</option>
  </select>

  <label>Harga Satuan (Rp):</label>
  <input type="number" id="harga" readonly>

  <label>Satuan:</label>
  <input type="text" id="satuan" readonly>

  <div id="inputM2" style="display: none;">
    <label>Ukuran Pemasangan (meter):</label>
    <div class="row">
      <input type="number" id="lebar" placeholder="Lebar (m)">
      <input type="number" id="tinggi" placeholder="Tinggi (m)">
    </div>
  </div>

  <div id="inputVolume">
    <label>Volume:</label>
    <input type="number" id="volume">
  </div>

  <button onclick="tambahData()">Tambah</button>

  <table>
    <thead>
      <tr>
        <th>No</th>
        <th>Pekerjaan</th>
        <th>Satuan</th>
        <th>Volume</th>
        <th>Harga</th>
        <th>Total</th>
      </tr>
    </thead>
    <tbody id="tabelData"></tbody>
    <tfoot>
      <tr>
        <th colspan="5">Grand Total</th>
        <th id="grandTotal">Rp 0</th>
      </tr>
    </tfoot>
  </table>

  <script>
    const dataPekerjaan = {
      keramik_60x60: { nama: "Keramik 60x60", harga: 120000, satuan: "m²" },
      keramik_50x50: { nama: "Keramik 50x50", harga: 130000, satuan: "m²" },
      keramik_40x40: { nama: "Keramik 40x40", harga: 150000, satuan: "m²" },
      keramik_30x30: { nama: "Keramik ≤30x30", harga: 180000, satuan: "m²" },
      marmer_lantai: { nama: "Marmer Lantai", harga: 350000, satuan: "m²" },
      marmer_dinding: { nama: "Marmer Dinding", harga: 400000, satuan: "m²" },
      plint_biasa: { nama: "Plint Biasa", harga: 200000, satuan: "meter lari" },
      trap_tangga: { nama: "Trap Tangga", harga: 500000, satuan: "trap" },
      lobang_lobang: { nama: "Lobang-lobang", harga: 80000, satuan: "lobang" },
      top_table: { nama: "Top Table", harga: 800000, satuan: "meter lari" }
    };

    let no = 1;
    let total = 0;

    function setHarga() {
      const pekerjaan = document.getElementById("pekerjaan").value;
      const data = dataPekerjaan[pekerjaan];

      document.getElementById("harga").value = data.harga;
      document.getElementById("satuan").value = data.satuan;

      if (data.satuan === "m²") {
        document.getElementById("inputM2").style.display = "block";
        document.getElementById("inputVolume").style.display = "none";
      } else {
        document.getElementById("inputM2").style.display = "none";
        document.getElementById("inputVolume").style.display = "block";
      }
    }

    function tambahData() {
      const pekerjaanKey = document.getElementById("pekerjaan").value;
      const data = dataPekerjaan[pekerjaanKey];
      let volume = 0;

      if (data.satuan === "m²") {
        const lebar = parseFloat(document.getElementById("lebar").value);
        const tinggi = parseFloat(document.getElementById("tinggi").value);
        volume = lebar * tinggi;
      } else {
        volume = parseFloat(document.getElementById("volume").value);
      }

      const totalItem = volume * data.harga;

      const row = document.createElement("tr");
      row.innerHTML = `
        <td>${no}</td>
        <td>${data.nama}</td>
        <td>${data.satuan}</td>
        <td>${volume.toFixed(2)}</td>
        <td>Rp ${data.harga.toLocaleString()}</td>
        <td>Rp ${totalItem.toLocaleString()}</td>
      `;

      document.getElementById("tabelData").appendChild(row);
      total += totalItem;
      document.getElementById("grandTotal").innerText = `Rp ${total.toLocaleString()}`;
      no++;

      // Reset input
      document.getElementById("volume").value = "";
      document.getElementById("lebar").value = "";
      document.getElementById("tinggi").value = "";
    }
  </script>

</body>
</html>
