<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Hitung Kebutuhan Keramik</title>
<style>
  body {
    font-family: Arial, sans-serif;
    max-width: 700px;
    margin: 20px auto;
    padding: 0 10px;
  }
  h2 {
    text-align: center;
  }
  label {
    font-weight: bold;
  }
  input[type="number"], select {
    width: 100%;
    padding: 8px;
    margin: 6px 0 16px 0;
    box-sizing: border-box;
  }
  button {
    padding: 10px 25px;
    font-size: 16px;
    cursor: pointer;
  }
  .hasil {
    margin-top: 20px;
    font-weight: bold;
    white-space: pre-line;
  }
  .illustration {
    margin-top: 20px;
    text-align: center;
  }
  svg {
    border: 1px solid #ccc;
    max-width: 100%;
    height: auto;
  }
</style>
</head>
<body>

<h2>Hitung Kebutuhan Keramik</h2>

<form id="formKeramik" onsubmit="hitungKeramik(event)">
  <label for="jenisArea">Pilih area pemasangan:</label>
  <select id="jenisArea" required onchange="ubahLabelDimensi()">
    <option value="dinding">Dinding (Lebar x Tinggi)</option>
    <option value="lantai">Lantai (Lebar x Panjang)</option>
  </select>

  <label id="labelDimensi1" for="dimensi1">Lebar (cm):</label>
  <input type="number" id="dimensi1" min="1" step="0.1" required />

  <label id="labelDimensi2" for="dimensi2">Tinggi (cm):</label>
  <input type="number" id="dimensi2" min="1" step="0.1" required />

  <label for="ukuranPanjangKeramik">Panjang keramik (cm):</label>
  <input type="number" id="ukuranPanjangKeramik" min="1" step="0.1" required />

  <label for="ukuranLebarKeramik">Lebar keramik (cm):</label>
  <input type="number" id="ukuranLebarKeramik" min="1" step="0.1" required />

  <label for="polaPasang">Pola pemasangan:</label>
  <select id="polaPasang" required onchange="updateIlustrasi()">
    <option value="horizontal">Horizontal</option>
    <option value="vertical">Vertical</option>
    <option value="diagonal">Diagonal 45°</option>
    <option value="parket">Parket (mirroring)</option>
  </select>

  <button type="submit">Hitung Kebutuhan</button>
</form>

<div class="hasil" id="hasilHitung"></div>

<div class="illustration" id="ilustrasiKeramik">
  <!-- SVG ilustrasi akan dimunculkan di sini -->
</div>

<script>
function ubahLabelDimensi() {
  const jenisArea = document.getElementById('jenisArea').value;
  if (jenisArea === 'dinding') {
    document.getElementById('labelDimensi1').textContent = 'Lebar (cm):';
    document.getElementById('labelDimensi2').textContent = 'Tinggi (cm):';
  } else {
    document.getElementById('labelDimensi1').textContent = 'Lebar (cm):';
    document.getElementById('labelDimensi2').textContent = 'Panjang (cm):';
  }
  updateIlustrasi();
}

function hitungKeramik(event) {
  event.preventDefault();

  const lebar = parseFloat(document.getElementById('dimensi1').value);
  const tinggi = parseFloat(document.getElementById('dimensi2').value);
  const keramikPanjang = parseFloat(document.getElementById('ukuranPanjangKeramik').value);
  const keramikLebar = parseFloat(document.getElementById('ukuranLebarKeramik').value);
  const pola = document.getElementById('polaPasang').value;

  if (lebar <= 0 || tinggi <= 0 || keramikPanjang <= 0 || keramikLebar <= 0) {
    alert('Mohon masukkan nilai yang valid dan lebih dari 0!');
    return;
  }

  const luasArea = lebar * tinggi; // cm2
  const luasKeramik = keramikPanjang * keramikLebar; // cm2

  // Jumlah keramik (tanpa buffer)
  let jumlahKeramik = luasArea / luasKeramik;

  // Tambah buffer 5% untuk potongan dan sisa
  jumlahKeramik *= 1.05;

  jumlahKeramik = Math.ceil(jumlahKeramik);

  // Tampilkan hasil
  const hasilText = `Luas area: ${luasArea.toFixed(2)} cm²\n` +
                    `Luas 1 keramik: ${luasKeramik.toFixed(2)} cm²\n` +
                    `Jumlah keramik yang dibutuhkan (termasuk 5% sisa): ${jumlahKeramik} buah\n` +
                    `Pola pemasangan: ${pola.charAt(0).toUpperCase() + pola.slice(1)}`;

  document.getElementById('hasilHitung').textContent = hasilText;

  updateIlustrasi(lebar, tinggi, keramikPanjang, keramikLebar, pola);
}

function updateIlustrasi(lebar=100, tinggi=100, kP=20, kL=20, pola='horizontal') {
  // buat SVG sederhana menampilkan pola keramik

  const svgWidth = 300;
  const svgHeight = 200;
  const areaWidth = svgWidth * 0.9;
  const areaHeight = svgHeight * 0.7;

  const keramikWidth = (kL / lebar) * areaWidth;
  const keramikHeight = (kP / tinggi) * areaHeight;

  const svgNS = "http://www.w3.org/2000/svg";

  const div = document.getElementById('ilustrasiKeramik');
  div.innerHTML = '';

  const svg = document.createElementNS(svgNS, 'svg');
  svg.setAttribute('viewBox', `0 0 ${svgWidth} ${svgHeight}`);
  svg.setAttribute('width', svgWidth);
  svg.setAttribute('height', svgHeight);

  // Area pemasangan
  const areaRect = document.createElementNS(svgNS, 'rect');
  areaRect.setAttribute('x', svgWidth*0.05);
  areaRect.setAttribute('y', svgHeight*0.15);
  areaRect.setAttribute('width', areaWidth);
  areaRect.setAttribute('height', areaHeight);
  areaRect.setAttribute('fill', '#f9f9f9');
  areaRect.setAttribute('stroke', '#aaa');
  areaRect.setAttribute('stroke-width', '2');
  svg.appendChild(areaRect);

  // Hitung jumlah keramik horizontal dan vertikal berdasarkan pola dan ukuran
  const countX = Math.ceil(areaWidth / keramikWidth);
  const countY = Math.ceil(areaHeight / keramikHeight);

  // Gambar keramik satu-satu
  for(let y=0; y < countY; y++) {
    for(let x=0; x < countX; x++) {
      let posX = svgWidth*0.05 + x * keramikWidth;
      let posY = svgHeight*0.15 + y * keramikHeight;

      // Untuk pola diagonal dan parket, kita akan rotasi dan geser posisi keramik
      let rotation = 0;
      let translateX = 0;
      let translateY = 0;

      if(pola === 'vertical') {
        // swap lebar dan tinggi keramik
        [keramikWidth, keramikHeight] = [keramikHeight, keramikWidth];
        // recalc posX and posY
        posX = svgWidth*0.05 + x * keramikWidth;
        posY = svgHeight*0.15 + y * keramikHeight;
      } else if (pola === 'diagonal') {
        rotation = 45;
        // biar tidak terlalu penuh, gambar lebih jarang
        if((x + y) % 2 !== 0) continue;
      } else if (pola === 'parket') {
        rotation = (x + y) % 2 === 0 ? 0 : 90;
      }

      const rect = document.createElementNS(svgNS, 'rect');
      rect.setAttribute('x', posX);
      rect.setAttribute('y', posY);
      rect.setAttribute('width', keramikWidth);
      rect.setAttribute('height', keramikHeight);
      rect.setAttribute('fill', '#b0c4de');
      rect.setAttribute('stroke', '#3a5f7d');
      rect.setAttribute('stroke-width', '1');

      if(rotation !== 0) {
        const cx = posX + keramikWidth/2;
        const cy = posY + keramikHeight/2;
        rect.setAttribute('transform', `rotate(${rotation} ${cx} ${cy})`);
      }

      svg.appendChild(rect);
    }
  }

  div.appendChild(svg);
}

// Init label & ilustrasi saat load
ubahLabelDimensi();
updateIlustrasi();
</script>

</body>
</html>
